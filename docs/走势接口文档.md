# 基金走势API接口文档

## 接口说明

获取指定基金在不同时间周期内的净值走势数据。

---

## 接口地址

```
GET /api/fund/trend
```

---

## 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| code | string | 是 | 基金代码(6位数字) |
| period | string | 否 | 时间周期,默认为 `month` |

### period 可选值

| 值 | 说明 | 数据范围 |
|----|------|----------|
| `week` | 最近一周 | 近7天 |
| `month` | 最近一个月 | 近30天 |
| `quarter` | 最近一个季度 | 近3个月 |
| `half_year` | 最近半年 | 近6个月 |
| `year` | 最近一年 | 近12个月 |
| `three_years` | 最近三年 | 近36个月 |
| `all` | 全部数据 | 成立以来所有数据 |

---

## 请求示例

### 1. 获取最近一周走势
```bash
curl "http://localhost:8080/api/fund/trend?code=001186&period=week"
```

### 2. 获取最近一个月走势(默认)
```bash
curl "http://localhost:8080/api/fund/trend?code=001186&period=month"
```

### 3. 获取最近一个季度走势
```bash
curl "http://localhost:8080/api/fund/trend?code=001186&period=quarter"
```

### 4. 获取最近一年走势
```bash
curl "http://localhost:8080/api/fund/trend?code=001186&period=year"
```

### 5. 获取全部历史走势
```bash
curl "http://localhost:8080/api/fund/trend?code=001186&period=all"
```

---

## 响应格式

### 成功响应 (200)

```json
{
  "code": "001186",
  "name": "富国文体健康股票A",
  "period": "month",
  "data": [
    {
      "date": "2026-01-03",
      "value": 1.2345
    },
    {
      "date": "2026-01-06",
      "value": 1.2380
    },
    {
      "date": "2026-01-07",
      "value": 1.2420
    },
    {
      "date": "2026-01-08",
      "value": 1.2356
    },
    ...
  ]
}
```

### 字段说明

| 字段 | 类型 | 说明 |
|------|------|------|
| code | string | 基金代码 |
| name | string | 基金名称 |
| period | string | 查询的时间周期 |
| data | array | 走势数据点数组 |
| data[].date | string | 日期(格式: YYYY-MM-DD) |
| data[].value | number | 单位净值 |

### 错误响应 (400/500)

```json
{
  "error": "错误描述信息"
}
```

---

## 错误码说明

| HTTP状态码 | 说明 |
|-----------|------|
| 200 | 请求成功 |
| 400 | 请求参数错误(基金代码格式错误、周期参数无效等) |
| 500 | 服务器内部错误(获取数据失败、解析失败等) |

---

## 使用场景

### 1. 绘制基金净值曲线图
```javascript
// 获取数据
fetch('http://localhost:8080/api/fund/trend?code=001186&period=month')
  .then(res => res.json())
  .then(data => {
    const dates = data.data.map(item => item.date);
    const values = data.data.map(item => item.value);
    
    // 使用 ECharts/Chart.js 等图表库绘制曲线
    drawChart(dates, values);
  });
```

### 2. 计算收益率
```javascript
fetch('http://localhost:8080/api/fund/trend?code=001186&period=year')
  .then(res => res.json())
  .then(data => {
    const firstValue = data.data[0].value;
    const lastValue = data.data[data.data.length - 1].value;
    const returnRate = ((lastValue - firstValue) / firstValue * 100).toFixed(2);
    console.log(`年收益率: ${returnRate}%`);
  });
```

### 3. 对比不同时间段表现
```javascript
// 获取多个周期数据进行对比
const periods = ['week', 'month', 'quarter', 'year'];
const promises = periods.map(period => 
  fetch(`http://localhost:8080/api/fund/trend?code=001186&period=${period}`)
    .then(res => res.json())
);

Promise.all(promises).then(results => {
  // 对比不同周期的收益表现
  results.forEach((data, index) => {
    console.log(`${periods[index]}周期数据点数量: ${data.data.length}`);
  });
});
```

---

## 注意事项

1. **数据更新频率**: 基金净值数据通常在交易日收盘后更新
2. **数据点密度**: 
   - 周/月数据: 每个交易日一个数据点
   - 季度/年数据: 每个交易日一个数据点
   - 全部数据: 从基金成立日至今的所有交易日数据
3. **非交易日**: 周末和节假日没有数据点
4. **数据来源**: 数据来自东方财富网,仅供参考
5. **性能建议**: 
   - 获取全部数据(`all`)可能返回大量数据点,建议按需获取
   - 前端建议增加数据缓存,避免频繁请求

---

## 完整示例

### Python 示例

```python
import requests
import matplotlib.pyplot as plt

# 获取基金走势数据
response = requests.get('http://localhost:8080/api/fund/trend', params={
    'code': '001186',
    'period': 'year'
})

data = response.json()

# 提取日期和净值
dates = [item['date'] for item in data['data']]
values = [item['value'] for item in data['data']]

# 绘制曲线图
plt.figure(figsize=(12, 6))
plt.plot(dates, values, marker='o', markersize=2)
plt.title(f"{data['name']} - 净值走势")
plt.xlabel('日期')
plt.ylabel('单位净值')
plt.xticks(rotation=45)
plt.grid(True, alpha=0.3)
plt.tight_layout()
plt.show()
```

### JavaScript + ECharts 示例

```html
<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
</head>
<body>
    <div id="chart" style="width: 800px; height: 400px;"></div>
    
    <script>
        fetch('http://localhost:8080/api/fund/trend?code=001186&period=quarter')
            .then(res => res.json())
            .then(data => {
                const chart = echarts.init(document.getElementById('chart'));
                
                const option = {
                    title: { text: `${data.name} - 净值走势` },
                    tooltip: { trigger: 'axis' },
                    xAxis: {
                        type: 'category',
                        data: data.data.map(item => item.date)
                    },
                    yAxis: { type: 'value' },
                    series: [{
                        data: data.data.map(item => item.value),
                        type: 'line',
                        smooth: true
                    }]
                };
                
                chart.setOption(option);
            });
    </script>
</body>
</html>
```

---

## API对比

| 接口 | 用途 | 数据内容 |
|------|------|----------|
| `/api/fund/detail` | 获取基金详细信息 | 当前净值、估值、增长率、收益率等汇总信息 |
| `/api/fund/trend` | 获取基金走势数据 | 指定周期内的净值历史数据点,用于绘制曲线图 |

两个接口配合使用可以实现完整的基金查询功能。
